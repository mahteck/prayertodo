# Phase II Tasks â€“ SalaatFlow Full-Stack Web Application

**Project**: SalaatFlow â€“ Intelligent Prayer & Masjid Todo Assistant
**Phase**: II â€“ Full-Stack Web Application
**Task List Version**: 1.0
**Date**: 2025-12-27
**Status**: Ready for Execution

---

## Task Execution Protocol

### ðŸš¨ Critical Rules

1. **NO MANUAL CODING**: All production code generated by Claude Code from specs
2. **SPEC IS TRUTH**: If code doesn't match spec â†’ refine spec/task â†’ regenerate code
3. **VALIDATE EACH TASK**: Must pass success criteria before proceeding to next
4. **SEQUENTIAL EXECUTION**: Complete tasks in order (dependencies exist)
5. **DATABASE REQUIRED**: Neon PostgreSQL must be configured before Task 4

### Task Workflow

For each task:
1. âœ… Read the task description
2. âœ… Read referenced spec sections (`/specs/phase2-webapp.md`)
3. âœ… Generate code via Claude Code
4. âœ… Run validation commands/tests
5. âœ… Mark task complete only if all success criteria pass
6. âœ… If failure â†’ refine task/spec â†’ regenerate (no manual patches)

---

## STEP 1: Environment Setup & Database Foundation

### Task 1: Create Backend Project Structure

**Short Title**: Setup Backend Directory & Config

**Files to Create**:
- `backend/` (directory)
- `backend/main.py` (placeholder with module docstring)
- `backend/models.py` (placeholder)
- `backend/database.py` (placeholder)
- `backend/schemas.py` (placeholder)
- `backend/config.py` (placeholder)
- `backend/crud.py` (placeholder)
- `backend/requirements.txt`
- `backend/.env.example`
- `backend/.gitignore`
- `backend/routers/` (directory)
- `backend/routers/__init__.py`

**Spec Reference**:
- Phase II Spec Section 2 (Data Models)
- Plan Step 1 (lines 24-77)

**Implementation Requirements**:

**`backend/requirements.txt`**:
```
fastapi==0.110.0
uvicorn[standard]==0.27.0
sqlmodel==0.0.14
psycopg2-binary==2.9.9
alembic==1.13.1
python-dotenv==1.0.0
pydantic==2.5.0
pydantic-settings==2.1.0
pytest==7.4.3
httpx==0.25.2
```

**`backend/.env.example`**:
```
DATABASE_URL=postgresql://user:password@host/salaatflow_db
CORS_ORIGINS=http://localhost:3000
```

**`backend/.gitignore`**:
```
__pycache__/
*.py[cod]
*$py.class
.env
.venv/
venv/
.pytest_cache/
.coverage
htmlcov/
```

**Success Criteria**:
- [ ] Directory `backend/` exists
- [ ] All placeholder files created with module docstrings
- [ ] `requirements.txt` has all dependencies
- [ ] `.env.example` has required variables
- [ ] `.gitignore` excludes Python artifacts

**Validation Command**:
```bash
ls -la backend/
cat backend/requirements.txt
python3 -m compileall backend/*.py
```

---

### Task 2: Implement SQLModel Data Models

**Short Title**: Create SQLModel Models

**Files to Create/Update**:
- `backend/models.py`

**Spec Reference**:
- Phase II Spec Section 2.1 (SpiritualTask Model)
- Phase II Spec Section 2.2 (Masjid Model)
- Phase II Spec Section 2.3 (DailyHadith Model)

**Implementation Requirements**:

Define complete SQLModel models:
- **Enums**: `TaskCategory`, `Priority`, `Recurrence`
- **Models**: `SpiritualTask`, `Masjid`, `DailyHadith`
- All fields with correct types, defaults, constraints
- Foreign key relationship: `SpiritualTask.masjid_id` â†’ `Masjid.id`
- Indexes on: `title`, `priority`, `completed`, `due_datetime`, `area_name`, `display_date`

**Success Criteria**:
- [ ] All 3 enums defined with correct values
- [ ] `SpiritualTask` has 15 fields matching spec
- [ ] `Masjid` has 14 fields matching spec
- [ ] `DailyHadith` has 6 fields matching spec
- [ ] Foreign key relationship defined
- [ ] All fields have type hints
- [ ] Module imports without errors

**Validation Command**:
```bash
cd backend
python3 -c "
from models import TaskCategory, Priority, Recurrence, SpiritualTask, Masjid, DailyHadith
print('TaskCategory:', list(TaskCategory))
print('Priority:', list(Priority))
print('SpiritualTask fields:', SpiritualTask.__fields__.keys())
print('Masjid fields:', Masjid.__fields__.keys())
print('âœ“ All models imported successfully')
"
```

---

### Task 3: Setup Database Connection

**Short Title**: Configure Database & Session

**Files to Create/Update**:
- `backend/database.py`
- `backend/config.py`

**Spec Reference**:
- Phase II Spec Section 5.1 (Database Setup)
- Plan Step 1 (database.py requirements)

**Implementation Requirements**:

**`backend/config.py`**:
```python
from pydantic_settings import BaseSettings

class Settings(BaseSettings):
    database_url: str
    cors_origins: str = "http://localhost:3000"

    class Config:
        env_file = ".env"

settings = Settings()
```

**`backend/database.py`**:
```python
from sqlmodel import SQLModel, create_engine, Session
from config import settings

engine = create_engine(settings.database_url, echo=True)

def create_db_and_tables():
    SQLModel.metadata.create_all(engine)

def get_session():
    with Session(engine) as session:
        yield session
```

**Success Criteria**:
- [ ] `config.py` loads environment variables
- [ ] `database.py` creates engine
- [ ] `get_session()` dependency function defined
- [ ] `create_db_and_tables()` function defined
- [ ] No import errors

**Validation Command**:
```bash
cd backend
# Create .env file first (manual step)
echo "DATABASE_URL=postgresql://user:pass@host/salaatflow_db" > .env
echo "CORS_ORIGINS=http://localhost:3000" >> .env

python3 -c "
from config import settings
print('Database URL configured:', settings.database_url[:20] + '...')
from database import engine
print('âœ“ Database engine created')
"
```

---

### Task 4: Initialize Alembic & Create Migration

**Short Title**: Setup Database Migrations

**Files to Create**:
- `backend/alembic.ini`
- `backend/alembic/env.py`
- `backend/alembic/versions/001_initial_schema.py`

**Spec Reference**:
- Phase II Spec Section 5.2 (Database Migrations)
- Plan Step 1 (Alembic setup)

**Implementation Requirements**:

1. Initialize Alembic:
```bash
cd backend
alembic init alembic
```

2. Configure `alembic.ini`:
- Set `sqlalchemy.url` to use env variable

3. Update `alembic/env.py`:
- Import models
- Set `target_metadata = SQLModel.metadata`

4. Create initial migration:
```bash
alembic revision --autogenerate -m "Initial schema"
```

**Success Criteria**:
- [ ] Alembic initialized
- [ ] `alembic.ini` configured
- [ ] `env.py` imports models correctly
- [ ] Migration file created
- [ ] Migration applies successfully

**Validation Command**:
```bash
cd backend
alembic upgrade head

# Verify tables created
psql $DATABASE_URL -c "\dt"
# Expected: spiritual_tasks, masjids, daily_hadiths
```

**Note**: Requires Neon PostgreSQL database URL configured in `.env`

---

### Task 5: Create Frontend Project Structure

**Short Title**: Setup Next.js Frontend

**Files to Create**:
- `frontend/` (directory)
- `frontend/package.json`
- `frontend/tsconfig.json`
- `frontend/next.config.js`
- `frontend/tailwind.config.js`
- `frontend/.env.local.example`
- `frontend/.gitignore`
- `frontend/app/layout.tsx`
- `frontend/app/page.tsx` (placeholder)
- `frontend/app/globals.css`
- `frontend/lib/` (directory)
- `frontend/components/` (directory)

**Spec Reference**:
- Phase II Spec Section 4.1 (Frontend Structure)
- Plan Step 1 (Frontend setup)

**Implementation Requirements**:

**`frontend/package.json`**:
```json
{
  "name": "salaatflow-frontend",
  "version": "0.1.0",
  "private": true,
  "scripts": {
    "dev": "next dev",
    "build": "next build",
    "start": "next start",
    "lint": "next lint"
  },
  "dependencies": {
    "next": "^14.0.4",
    "react": "^18.2.0",
    "react-dom": "^18.2.0",
    "axios": "^1.6.2",
    "typescript": "^5.3.3"
  },
  "devDependencies": {
    "@types/node": "^20.10.5",
    "@types/react": "^18.2.45",
    "@types/react-dom": "^18.2.18",
    "tailwindcss": "^3.4.0",
    "postcss": "^8.4.32",
    "autoprefixer": "^10.4.16",
    "eslint": "^8.56.0",
    "eslint-config-next": "^14.0.4"
  }
}
```

**`frontend/tsconfig.json`**:
```json
{
  "compilerOptions": {
    "target": "ES2020",
    "lib": ["dom", "dom.iterable", "esnext"],
    "allowJs": true,
    "skipLibCheck": true,
    "strict": true,
    "forceConsistentCasingInFileNames": true,
    "noEmit": true,
    "esModuleInterop": true,
    "module": "esnext",
    "moduleResolution": "bundler",
    "resolveJsonModule": true,
    "isolatedModules": true,
    "jsx": "preserve",
    "incremental": true,
    "plugins": [{"name": "next"}],
    "paths": {
      "@/*": ["./*"]
    }
  },
  "include": ["next-env.d.ts", "**/*.ts", "**/*.tsx", ".next/types/**/*.ts"],
  "exclude": ["node_modules"]
}
```

**`frontend/next.config.js`**:
```javascript
/** @type {import('next').NextConfig} */
const nextConfig = {
  env: {
    NEXT_PUBLIC_API_URL: process.env.NEXT_PUBLIC_API_URL || 'http://localhost:8000/api/v1',
  },
}

module.exports = nextConfig
```

**`frontend/tailwind.config.js`**:
```javascript
/** @type {import('tailwindcss').Config} */
module.exports = {
  content: [
    './pages/**/*.{js,ts,jsx,tsx,mdx}',
    './components/**/*.{js,ts,jsx,tsx,mdx}',
    './app/**/*.{js,ts,jsx,tsx,mdx}',
  ],
  theme: {
    extend: {},
  },
  plugins: [],
}
```

**`frontend/app/layout.tsx`**:
```tsx
import './globals.css'
import type { Metadata } from 'next'

export const metadata: Metadata = {
  title: 'SalaatFlow - Prayer & Spiritual Task Manager',
  description: 'Manage your spiritual tasks and prayer schedules',
}

export default function RootLayout({
  children,
}: {
  children: React.ReactNode
}) {
  return (
    <html lang="en">
      <body>{children}</body>
    </html>
  )
}
```

**`frontend/app/page.tsx`**:
```tsx
export default function Home() {
  return (
    <main className="flex min-h-screen flex-col items-center justify-center p-24">
      <h1 className="text-4xl font-bold">SalaatFlow</h1>
      <p className="mt-4">Prayer & Spiritual Task Manager</p>
    </main>
  )
}
```

**`frontend/app/globals.css`**:
```css
@tailwind base;
@tailwind components;
@tailwind utilities;
```

**Success Criteria**:
- [ ] `package.json` has all dependencies
- [ ] `tsconfig.json` configured for strict TypeScript
- [ ] `next.config.js` sets API URL env variable
- [ ] Tailwind configured
- [ ] Root layout and home page created
- [ ] `npm install` completes successfully
- [ ] `npm run dev` starts dev server
- [ ] `npm run build` compiles without TypeScript errors

**Validation Command**:
```bash
cd frontend
npm install
npm run build
# Expected: No TypeScript errors, build succeeds

npm run dev
# Open http://localhost:3000
# Expected: "SalaatFlow" page displays
```

---

### Task 6: Create Frontend Type Definitions

**Short Title**: Define TypeScript Interfaces

**Files to Create**:
- `frontend/lib/types.ts`

**Spec Reference**:
- Phase II Spec Section 4.4 (TypeScript Interfaces)
- Plan Step 5 (Type definitions)

**Implementation Requirements**:

Complete TypeScript interfaces matching backend models:
- `Task` interface (15 fields)
- `Masjid` interface (14 fields)
- `DailyHadith` interface (6 fields)
- `TaskFilters` interface
- `ApiResponse<T>` generic type
- Enum types matching backend

**Success Criteria**:
- [ ] All interfaces defined with correct field types
- [ ] Optional fields marked with `?`
- [ ] Enum types match backend exactly
- [ ] `TaskFilters` has all filter fields
- [ ] File compiles without errors
- [ ] Can be imported in other files

**Validation Command**:
```bash
cd frontend
npx tsc --noEmit lib/types.ts
# Expected: No errors

cat > test-types.ts << 'EOF'
import { Task, Masjid, DailyHadith } from './lib/types';

const task: Task = {
  id: 1,
  title: "Test",
  category: "Farz",
  priority: "High",
  tags: [],
  recurrence: "None",
  completed: false,
  created_at: new Date().toISOString(),
  updated_at: new Date().toISOString()
};

console.log("âœ“ Types work correctly");
EOF

npx tsx test-types.ts
```

---

## STEP 2: Backend API - Core CRUD (Tasks)

### Task 7: Implement Task CRUD Functions

**Short Title**: Create Task Database Operations

**Files to Create/Update**:
- `backend/crud.py`

**Spec Reference**:
- Phase II Spec Section 3.2 (Task Endpoints)
- Plan Step 2 (crud.py functions)

**Implementation Requirements**:

Implement functions in `crud.py`:
- `create_task(session: Session, task_data: dict) -> SpiritualTask`
- `get_task(session: Session, task_id: int) -> SpiritualTask | None`
- `list_tasks(session: Session, filters: dict, sort: dict, pagination: dict) -> tuple[list[SpiritualTask], int]`
- `update_task(session: Session, task_id: int, updates: dict) -> SpiritualTask | None`
- `delete_task(session: Session, task_id: int) -> bool`
- `toggle_task_completion(session: Session, task_id: int) -> SpiritualTask | None`

Features:
- `list_tasks` implements:
  - Status filtering (all/pending/completed)
  - Category filtering
  - Priority filtering
  - Masjid ID filtering
  - Search (title + description, case-insensitive)
  - Sorting (title, due_date, priority, created_at)
  - Pagination (limit + offset)
  - Returns (tasks, total_count) tuple

**Success Criteria**:
- [ ] All 6 CRUD functions implemented
- [ ] `list_tasks` handles all filter combinations
- [ ] `list_tasks` implements search with ILIKE
- [ ] `list_tasks` implements sorting
- [ ] `list_tasks` implements pagination
- [ ] `update_task` sets `updated_at` automatically
- [ ] `toggle_task_completion` flips boolean correctly
- [ ] All functions have type hints and docstrings

**Validation Command**:
```bash
cd backend
python3 -c "
from crud import create_task, get_task, list_tasks, update_task, delete_task, toggle_task_completion
print('âœ“ All CRUD functions imported')
"
```

---

### Task 8: Create Task Request/Response Schemas

**Short Title**: Define Task Pydantic Schemas

**Files to Create/Update**:
- `backend/schemas.py`

**Spec Reference**:
- Phase II Spec Section 3.2.3 (Create Task request)
- Phase II Spec Section 3.2.4 (Update Task request)
- Plan Step 2 (schemas.py)

**Implementation Requirements**:

Define Pydantic schemas:
- `TaskCreate` (request body for POST):
  - Required: title, category
  - Optional: description, priority, tags, masjid_id, due_datetime, recurrence
- `TaskUpdate` (request body for PUT):
  - All fields optional
- `TaskResponse` (response):
  - All SpiritualTask fields
  - Nested `MasjidResponse` (optional)
- `TaskListResponse`:
  - `tasks: list[TaskResponse]`
  - `total: int`
  - `limit: int`
  - `offset: int`

**Success Criteria**:
- [ ] `TaskCreate` validates required fields
- [ ] `TaskUpdate` allows partial updates
- [ ] `TaskResponse` includes all fields
- [ ] `TaskResponse` can include nested masjid
- [ ] Schemas have proper validation
- [ ] Schemas compile without errors

**Validation Command**:
```bash
cd backend
python3 -c "
from schemas import TaskCreate, TaskUpdate, TaskResponse, TaskListResponse
# Test TaskCreate
task = TaskCreate(title='Test', category='Farz')
print('TaskCreate:', task)
print('âœ“ Schemas defined correctly')
"
```

---

### Task 9: Implement Task API Router

**Short Title**: Create Task Endpoints

**Files to Create/Update**:
- `backend/routers/tasks.py`

**Spec Reference**:
- Phase II Spec Section 3.2.1 through 3.2.6
- Plan Step 2 (Task endpoints)

**Implementation Requirements**:

Implement 6 endpoints:
1. `POST /api/v1/tasks` - Create task
2. `GET /api/v1/tasks` - List tasks with filters
3. `GET /api/v1/tasks/{id}` - Get single task
4. `PUT /api/v1/tasks/{id}` - Update task
5. `DELETE /api/v1/tasks/{id}` - Delete task
6. `PATCH /api/v1/tasks/{id}/toggle` - Toggle completion

All endpoints use:
- `Depends(get_session)` for database session
- Proper request/response schemas
- HTTP status codes (200, 201, 204, 404, 422)
- Error handling with HTTPException

**Success Criteria**:
- [ ] All 6 endpoints defined
- [ ] POST returns 201 on success
- [ ] GET returns 404 if not found
- [ ] PUT validates input and returns 200
- [ ] DELETE returns 204 on success
- [ ] PATCH toggles completion correctly
- [ ] List endpoint accepts all query parameters
- [ ] All endpoints have proper type hints

**Validation Command**:
```bash
cd backend
python3 -c "
from routers.tasks import router
print('Endpoints:', [route.path for route in router.routes])
print('âœ“ Task router defined')
"
```

---

### Task 10: Setup FastAPI Application

**Short Title**: Initialize FastAPI App

**Files to Create/Update**:
- `backend/main.py`

**Spec Reference**:
- Phase II Spec Section 3.1 (Base URL & Configuration)
- Plan Step 2 (main.py)

**Implementation Requirements**:

Create FastAPI app with:
- App initialization
- CORS middleware (allow localhost:3000)
- Task router registration at `/api/v1`
- Startup event to create tables
- Root endpoint (`GET /`) for health check

**Success Criteria**:
- [ ] FastAPI app initializes
- [ ] CORS middleware configured for localhost:3000
- [ ] Task router registered with `/api/v1` prefix
- [ ] Startup event creates database tables
- [ ] App runs without errors
- [ ] Swagger docs accessible at `/docs`

**Validation Command**:
```bash
cd backend
uvicorn main:app --reload &
sleep 3

# Test root endpoint
curl http://localhost:8000/
# Expected: {"message": "SalaatFlow API"}

# Test Swagger docs
curl http://localhost:8000/docs
# Expected: HTML response

# Test task endpoint
curl http://localhost:8000/api/v1/tasks
# Expected: {"tasks": [], "total": 0, ...}

kill %1  # Stop uvicorn
```

---

### Task 11: Test Task CRUD via API

**Short Title**: Validate Task Endpoints

**Spec Reference**:
- Phase II Spec Section 6.1.1 (Backend API Tests)
- Plan Step 2 (Validation commands)

**Manual Test Steps**:

```bash
# Start server
cd backend
uvicorn main:app --reload &

# 1. Create task
curl -X POST http://localhost:8000/api/v1/tasks \
  -H "Content-Type: application/json" \
  -d '{
    "title": "Attend Fajr",
    "description": "Wake up early",
    "category": "Farz",
    "priority": "High",
    "tags": ["Morning", "Masjid"]
  }'
# Expected: 201, returns task with ID

# 2. List tasks
curl http://localhost:8000/api/v1/tasks
# Expected: 200, array with 1 task

# 3. Filter by status
curl "http://localhost:8000/api/v1/tasks?status=pending"
# Expected: 200, array with 1 task

# 4. Search
curl "http://localhost:8000/api/v1/tasks?search=Fajr"
# Expected: 200, finds the task

# 5. Sort by priority
curl "http://localhost:8000/api/v1/tasks?sort_by=priority&sort_order=desc"
# Expected: 200, High priority task first

# 6. Get task by ID
curl http://localhost:8000/api/v1/tasks/1
# Expected: 200, task details

# 7. Update task
curl -X PUT http://localhost:8000/api/v1/tasks/1 \
  -H "Content-Type: application/json" \
  -d '{"completed": true}'
# Expected: 200, updated task

# 8. Toggle completion
curl -X PATCH http://localhost:8000/api/v1/tasks/1/toggle
# Expected: 200, completed=false

# 9. Delete task
curl -X DELETE http://localhost:8000/api/v1/tasks/1
# Expected: 204

# 10. Verify deleted
curl http://localhost:8000/api/v1/tasks/1
# Expected: 404
```

**Success Criteria**:
- [ ] All 10 test steps succeed
- [ ] Status codes correct
- [ ] Filtering works
- [ ] Searching works
- [ ] Sorting works
- [ ] No server errors in logs

---

## STEP 3: Backend API - Masjid & Hadith

### Task 12: Implement Masjid CRUD Functions

**Short Title**: Create Masjid Database Operations

**Files to Update**:
- `backend/crud.py`

**Spec Reference**:
- Phase II Spec Section 3.3 (Masjid Endpoints)
- Plan Step 3 (Masjid CRUD)

**Implementation Requirements**:

Add functions to `crud.py`:
- `create_masjid(session: Session, masjid_data: dict) -> Masjid`
- `get_masjid(session: Session, masjid_id: int) -> Masjid | None`
- `list_masjids(session: Session, area_name: str | None) -> list[Masjid]`
- `update_masjid(session: Session, masjid_id: int, updates: dict) -> Masjid | None`
- `delete_masjid(session: Session, masjid_id: int) -> bool`
- `get_unique_areas(session: Session) -> list[str]`

**Success Criteria**:
- [ ] All 6 masjid functions implemented
- [ ] `list_masjids` filters by area_name if provided
- [ ] `get_unique_areas` returns distinct area names
- [ ] Functions have type hints and docstrings

**Validation Command**:
```bash
cd backend
python3 -c "
from crud import create_masjid, list_masjids, get_unique_areas
print('âœ“ Masjid CRUD functions imported')
"
```

---

### Task 13: Implement Hadith Functions

**Short Title**: Create Hadith Database Operations

**Files to Update**:
- `backend/crud.py`

**Spec Reference**:
- Phase II Spec Section 3.4 (Hadith Endpoints)
- Plan Step 3 (Hadith CRUD)

**Implementation Requirements**:

Add functions to `crud.py`:
- `get_todays_hadith(session: Session, language: str = 'en') -> DailyHadith | None`
  - Query: `display_date = today AND language = language`
- `list_hadiths(session: Session) -> list[DailyHadith]`
- `create_hadith(session: Session, hadith_data: dict) -> DailyHadith`

**Success Criteria**:
- [ ] `get_todays_hadith` finds hadith for current date
- [ ] `get_todays_hadith` filters by language
- [ ] `list_hadiths` returns all hadiths
- [ ] `create_hadith` persists to database

**Validation Command**:
```bash
cd backend
python3 -c "
from crud import get_todays_hadith, create_hadith
print('âœ“ Hadith CRUD functions imported')
"
```

---

### Task 14: Create Masjid & Hadith Schemas

**Short Title**: Define Masjid/Hadith Pydantic Schemas

**Files to Update**:
- `backend/schemas.py`

**Spec Reference**:
- Phase II Spec Section 3.3 (Masjid schemas)
- Phase II Spec Section 3.4 (Hadith schemas)

**Implementation Requirements**:

Add schemas:
- `MasjidCreate`, `MasjidUpdate`, `MasjidResponse`
- `HadithCreate`, `HadithResponse`
- `AreasResponse`: `{"areas": list[str]}`
- `MasjidListResponse`: `{"masjids": list[MasjidResponse], "total": int}`

Validation rules:
- Masjid: name, area_name required; prayer times in HH:MM format
- Hadith: content, reference required; display_date as datetime

**Success Criteria**:
- [ ] All schemas defined
- [ ] Prayer time fields validate HH:MM format
- [ ] Schemas compile without errors

**Validation Command**:
```bash
cd backend
python3 -c "
from schemas import MasjidCreate, HadithCreate, AreasResponse
masjid = MasjidCreate(
    name='Test Masjid',
    area_name='Test Area',
    fajr_time='05:30',
    dhuhr_time='13:00',
    asr_time='16:30',
    maghrib_time='18:15',
    isha_time='19:45'
)
print('âœ“ Schemas work correctly')
"
```

---

### Task 15: Implement Masjid API Router

**Short Title**: Create Masjid Endpoints

**Files to Create**:
- `backend/routers/masjids.py`

**Spec Reference**:
- Phase II Spec Section 3.3.1 through 3.3.5
- Plan Step 3 (Masjid endpoints)

**Implementation Requirements**:

Implement 5 endpoints:
1. `POST /api/v1/masjids` - Create masjid
2. `GET /api/v1/masjids` - List masjids (with area filter)
3. `GET /api/v1/masjids/{id}` - Get single masjid
4. `PUT /api/v1/masjids/{id}` - Update masjid
5. `DELETE /api/v1/masjids/{id}` - Delete masjid

**Success Criteria**:
- [ ] All 5 endpoints defined
- [ ] List endpoint accepts `area_name` query param
- [ ] All endpoints use proper schemas
- [ ] Error handling with 404, 422

**Validation Command**:
```bash
cd backend
python3 -c "
from routers.masjids import router
print('Masjid endpoints:', [route.path for route in router.routes])
"
```

---

### Task 16: Implement Hadith & Utility Routers

**Short Title**: Create Hadith and Utility Endpoints

**Files to Create**:
- `backend/routers/hadiths.py`
- `backend/routers/utility.py`

**Spec Reference**:
- Phase II Spec Section 3.4 (Hadith endpoints)
- Phase II Spec Section 3.5 (Utility endpoints)

**Implementation Requirements**:

**Hadith Router** (`hadiths.py`):
1. `GET /api/v1/hadith/today` - Get today's hadith
2. `GET /api/v1/hadiths` - List all (admin)
3. `POST /api/v1/hadiths` - Create (admin)

**Utility Router** (`utility.py`):
1. `GET /api/v1/health` - Health check
2. `GET /api/v1/areas` - List unique areas

**Success Criteria**:
- [ ] Hadith router has 3 endpoints
- [ ] Utility router has 2 endpoints
- [ ] Today's hadith returns 404 if not found
- [ ] Health check returns status
- [ ] Areas endpoint queries distinct values

**Validation Command**:
```bash
cd backend
python3 -c "
from routers.hadiths import router as hadith_router
from routers.utility import router as utility_router
print('âœ“ All routers defined')
"
```

---

### Task 17: Register All Routers in Main App

**Short Title**: Update Main App with All Routers

**Files to Update**:
- `backend/main.py`

**Implementation Requirements**:

Register routers:
- Task router: `/api/v1/tasks`
- Masjid router: `/api/v1/masjids`
- Hadith router: `/api/v1`
- Utility router: `/api/v1`

**Success Criteria**:
- [ ] All 4 routers registered
- [ ] Swagger docs show all endpoints
- [ ] No route conflicts

**Validation Command**:
```bash
cd backend
uvicorn main:app --reload &
sleep 2

curl http://localhost:8000/docs | grep -o "operational" | wc -l
# Expected: Should find Swagger UI

curl http://localhost:8000/api/v1/health
# Expected: {"status": "healthy", ...}

kill %1
```

---

### Task 18: Test Masjid & Hadith APIs

**Short Title**: Validate Masjid/Hadith Endpoints

**Manual Test Steps**:

```bash
cd backend
uvicorn main:app --reload &

# Create masjid
MASJID_ID=$(curl -X POST http://localhost:8000/api/v1/masjids \
  -H "Content-Type: application/json" \
  -d '{
    "name": "Masjid Al-Huda",
    "area_name": "DHA Phase 5",
    "address": "123 Main St",
    "fajr_time": "05:30",
    "dhuhr_time": "13:00",
    "asr_time": "16:30",
    "maghrib_time": "18:15",
    "isha_time": "19:45",
    "jummah_time": "13:30"
  }' | jq -r '.id')

# List masjids
curl http://localhost:8000/api/v1/masjids

# Filter by area
curl "http://localhost:8000/api/v1/masjids?area_name=DHA%20Phase%205"

# Get areas
curl http://localhost:8000/api/v1/areas
# Expected: {"areas": ["DHA Phase 5"]}

# Create hadith
curl -X POST http://localhost:8000/api/v1/hadiths \
  -H "Content-Type: application/json" \
  -d '{
    "content": "The best of people are those who are most beneficial.",
    "reference": "Sahih al-Jami 3289",
    "language": "en",
    "display_date": "'$(date -I)'T00:00:00Z"
  }'

# Get today's hadith
curl http://localhost:8000/api/v1/hadith/today
# Expected: 200, returns hadith
```

**Success Criteria**:
- [ ] Masjid creation succeeds
- [ ] Area filtering works
- [ ] Areas endpoint returns list
- [ ] Hadith creation succeeds
- [ ] Today's hadith retrieval works

---

## STEP 4: Backend - Seed Data & Advanced Features

### Task 19: Create Seed Data Script

**Short Title**: Implement Database Seeding

**Files to Create**:
- `backend/seed.py`

**Spec Reference**:
- Phase II Spec Section 5.3 (Seed Data)
- Plan Step 4 (seed.py)

**Implementation Requirements**:

Create script that populates:
- **5-10 Masjids** across areas:
  - DHA Phase 5, Gulshan-e-Iqbal, Clifton, Malir, Johar
  - Each with realistic prayer times
- **20-30 Tasks**:
  - Mix of all categories (Farz, Sunnah, Nafl, Deed)
  - Mix of priorities (High, Medium, Low)
  - Some linked to masjids, some not
  - Some completed, most pending
  - Variety of tags
- **7-10 Hadiths**:
  - English language
  - Display dates for next 7-10 days
  - Authentic hadith references

**Success Criteria**:
- [ ] Script runs without errors
- [ ] Creates 5+ masjids
- [ ] Creates 20+ tasks
- [ ] Creates 7+ hadiths
- [ ] Can be run multiple times (idempotent or clears first)

**Validation Command**:
```bash
cd backend
python seed.py

# Verify counts
psql $DATABASE_URL -c "SELECT COUNT(*) FROM masjids;"
# Expected: >= 5

psql $DATABASE_URL -c "SELECT COUNT(*) FROM spiritual_tasks;"
# Expected: >= 20

psql $DATABASE_URL -c "SELECT COUNT(*) FROM daily_hadiths;"
# Expected: >= 7
```

---

### Task 20: Implement Advanced Task Filtering

**Short Title**: Add Task-Masjid Relationship Queries

**Files to Update**:
- `backend/crud.py`
- `backend/routers/tasks.py`

**Spec Reference**:
- Plan Step 4 (Advanced query features)
- Phase II Spec Section 3.2.1 (List with filters)

**Implementation Requirements**:

Enhance `list_tasks` function:
- Add `area_name` filter (joins with Masjid table)
- Implement eager loading: `options(joinedload(SpiritualTask.masjid))`
- Include masjid details in task responses
- Optimize queries with proper indexes

**Success Criteria**:
- [ ] Area filter works via masjid join
- [ ] Task responses include nested masjid object
- [ ] Queries use eager loading (no N+1 problem)
- [ ] Filter combinations work together

**Validation Command**:
```bash
cd backend
uvicorn main:app --reload &

# Test area filter
curl "http://localhost:8000/api/v1/tasks?area_name=DHA%20Phase%205"
# Expected: Returns tasks from that area

# Test masjid inclusion
curl http://localhost:8000/api/v1/tasks/1 | jq '.masjid'
# Expected: {id, name, area_name, ...} or null
```

---

## STEP 5: Frontend - API Client & Types

### Task 21: Create API Client

**Short Title**: Implement Axios API Client

**Files to Create**:
- `frontend/lib/api.ts`

**Spec Reference**:
- Phase II Spec Section 4.5 (API Client)
- Plan Step 5 (API client)

**Implementation Requirements**:

Create API client with:
- Axios instance with base URL from env
- `taskApi`: list, get, create, update, delete, toggle
- `masjidApi`: list, get
- `hadithApi`: today
- `utilityApi`: areas
- Proper error handling
- TypeScript types for all responses

**Success Criteria**:
- [ ] All API functions defined
- [ ] Base URL from environment variable
- [ ] Error handling implemented
- [ ] TypeScript types correct
- [ ] Can be imported in components

**Validation Command**:
```bash
cd frontend

cat > test-api.ts << 'EOF'
import { taskApi, masjidApi, hadithApi, utilityApi } from './lib/api';

async function test() {
  try {
    const tasks = await taskApi.list();
    console.log('Tasks fetched:', tasks.total);

    const areas = await utilityApi.areas();
    console.log('Areas:', areas.areas);

    console.log('âœ“ API client works');
  } catch (error) {
    console.error('API error:', error);
  }
}

test();
EOF

# Requires backend running
npx tsx test-api.ts
```

---

### Task 22: Create Utility Functions

**Short Title**: Implement Helper Functions

**Files to Create**:
- `frontend/lib/utils.ts`

**Spec Reference**:
- Plan Step 5 (Utility functions)

**Implementation Requirements**:

Create utility functions:
- `formatDate(dateString: string): string` - Format ISO to readable
- `formatTime(timeString: string): string` - Format HH:MM to 12-hour
- `getPriorityColor(priority: string): string` - Return Tailwind class
- `getCategoryIcon(category: string): string` - Return emoji/icon
- `cn(...classes: string[]): string` - Merge class names (optional)

**Success Criteria**:
- [ ] All utility functions defined
- [ ] Functions have proper TypeScript types
- [ ] Functions tested with sample inputs

**Validation Command**:
```bash
cd frontend

cat > test-utils.ts << 'EOF'
import { formatDate, formatTime, getPriorityColor, getCategoryIcon } from './lib/utils';

console.log('Date:', formatDate('2025-12-27T10:00:00Z'));
console.log('Time:', formatTime('13:30'));
console.log('Priority color:', getPriorityColor('High'));
console.log('Category icon:', getCategoryIcon('Farz'));
console.log('âœ“ Utils work');
EOF

npx tsx test-utils.ts
```

---

## STEP 6: Frontend - Core Components & Pages

_(Due to length, I'll create tasks 23-30 for this step)_

### Task 23: Create Navbar Component

**Short Title**: Build Navigation Bar

**Files to Create**:
- `frontend/components/Navbar.tsx`

**Spec Reference**:
- Phase II Spec Section 4.3.6 (Navbar)
- Plan Step 6 (Components)

**Implementation Requirements**:

Create Navbar with:
- Logo/branding: "SalaatFlow"
- Navigation links: Home, Tasks, Masjids
- Add Task button (+ icon)
- Responsive mobile menu (hamburger)
- Tailwind styling

**Success Criteria**:
- [ ] Component renders without errors
- [ ] All links navigate correctly
- [ ] Mobile menu works
- [ ] Styled with Tailwind

---

### Task 24: Create PriorityBadge Component

**Short Title**: Build Priority Indicator

**Files to Create**:
- `frontend/components/PriorityBadge.tsx`

**Spec Reference**:
- Phase II Spec Section 4.3 (Components)

**Implementation Requirements**:

Props: `{ priority: 'High' | 'Medium' | 'Low' }`

Rendering:
- High: Red badge
- Medium: Yellow badge
- Low: Green badge
- Tailwind classes for colors

**Success Criteria**:
- [ ] Component renders with correct colors
- [ ] TypeScript props validated

---

### Task 25: Create TaskCard Component

**Short Title**: Build Task Display Card

**Files to Create**:
- `frontend/components/TaskCard.tsx`

**Spec Reference**:
- Phase II Spec Section 4.3.1 (TaskCard)
- Plan Step 6 (TaskCard)

**Implementation Requirements**:

Props: `task`, `onToggleComplete`, `onEdit`, `onDelete`

Features:
- Checkbox for completion
- Priority badge
- Category badge
- Title (clickable to detail)
- Due date (with overdue warning)
- Tags as pills
- Edit/Delete buttons
- Masjid name if linked

**Success Criteria**:
- [ ] Component renders task data
- [ ] Checkbox calls onToggleComplete
- [ ] Edit/Delete buttons work
- [ ] Mobile responsive

---

### Task 26: Create DailyHadithBox Component

**Short Title**: Build Hadith Display

**Files to Create**:
- `frontend/components/DailyHadithBox.tsx`

**Spec Reference**:
- Phase II Spec Section 4.3.3 (DailyHadithBox)

**Implementation Requirements**:

- Fetches today's hadith on mount using `hadithApi.today()`
- Loading state: Spinner
- Error state: "No hadith available"
- Success state: Display content + reference
- Bismillah header
- Islamic pattern background (CSS)

**Success Criteria**:
- [ ] Fetches hadith from API
- [ ] Shows loading state
- [ ] Shows error gracefully
- [ ] Displays hadith beautifully

---

### Task 27: Create TaskFilters Component

**Short Title**: Build Filter Controls

**Files to Create**:
- `frontend/components/TaskFilters.tsx`

**Spec Reference**:
- Phase II Spec Section 4.3.2 (TaskFilters)

**Implementation Requirements**:

Props: `filters`, `onFilterChange`, `masjids`

Controls:
- Search input (debounced 300ms)
- Status dropdown (All/Pending/Completed)
- Category dropdown
- Priority dropdown
- Masjid dropdown
- Sort by dropdown
- Sort order toggle
- Clear filters button

**Success Criteria**:
- [ ] All filter controls render
- [ ] Callbacks fire on change
- [ ] Search is debounced
- [ ] Clear button resets all

---

### Task 28: Create Dashboard Page

**Short Title**: Build Home/Dashboard Page

**Files to Update**:
- `frontend/app/page.tsx`

**Spec Reference**:
- Phase II Spec Section 4.2.1 (Dashboard)
- Plan Step 6 (Dashboard page)

**Implementation Requirements**:

Layout sections:
1. DailyHadithBox
2. Upcoming tasks (limit 10, status=pending, sort by due_date)
3. Stats: Total tasks, Completed today, Pending
4. Area selector + masjid preview

Features:
- Fetch tasks and areas on mount
- Show loading states
- "View All Tasks" link

**Success Criteria**:
- [ ] Page renders without errors
- [ ] Hadith displays
- [ ] Tasks fetched and displayed
- [ ] Stats calculated correctly
- [ ] Responsive layout

---

### Task 29: Create Task List Page

**Short Title**: Build Task List View

**Files to Create**:
- `frontend/app/tasks/page.tsx`
- `frontend/components/TaskList.tsx`

**Spec Reference**:
- Phase II Spec Section 4.2.2 (Task List Page)
- Plan Step 6 (Task list)

**Implementation Requirements**:

Page features:
- TaskFilters component
- TaskList component (maps tasks to TaskCards)
- Pagination controls
- Add Task button in header
- Fetch tasks with filters on filter change

**Success Criteria**:
- [ ] Page loads task list
- [ ] Filters update list
- [ ] Pagination works
- [ ] Add button navigates to /tasks/new
- [ ] Toggle complete works
- [ ] Edit/Delete work

---

### Task 30: Create Task Form Pages

**Short Title**: Build Task Create/Edit Forms

**Files to Create**:
- `frontend/app/tasks/new/page.tsx`
- `frontend/app/tasks/[id]/edit/page.tsx`
- `frontend/components/TaskForm.tsx`

**Spec Reference**:
- Phase II Spec Sections 4.2.3 (Create/Edit Form)
- Plan Step 6 (Form component)

**Implementation Requirements**:

TaskForm props: `task` (optional), `onSubmit`, `onCancel`

Form fields:
- Title (required)
- Description (textarea)
- Category (dropdown)
- Priority (dropdown)
- Tags (comma-separated input)
- Masjid (dropdown with area filter)
- Due datetime (datetime-local input)
- Recurrence (dropdown)

Features:
- Client-side validation
- Loading state on submit
- Error display
- Pre-populate for edit mode

**Success Criteria**:
- [ ] Create form submits new task
- [ ] Edit form pre-populates data
- [ ] Validation prevents empty title
- [ ] Redirects on success
- [ ] Shows errors on failure

---

## STEP 7: Frontend - Masjid Pages & Advanced Features

### Task 31: Create MasjidCard Component

**Short Title**: Build Masjid Display Card

**Files to Create**:
- `frontend/components/MasjidCard.tsx`

**Spec Reference**:
- Phase II Spec Section 4.3 (MasjidCard)

**Implementation Requirements**:

Props: `masjid`

Display:
- Name
- Area
- All 5 prayer times + Jummah (formatted)
- View Details button/link

**Success Criteria**:
- [ ] Renders masjid data
- [ ] Formats prayer times (HH:MM â†’ 12-hour)
- [ ] Link navigates to detail page

---

### Task 32: Create Masjid List Page

**Short Title**: Build Masjid List View

**Files to Create**:
- `frontend/app/masjids/page.tsx`

**Spec Reference**:
- Phase II Spec Section 4.2.5 (Masjid List Page)
- Plan Step 7 (Masjid pages)

**Implementation Requirements**:

Features:
- Area filter dropdown
- Fetch masjids on mount
- Filter masjids by selected area
- Map to MasjidCard components
- Loading and empty states

**Success Criteria**:
- [ ] Page lists all masjids
- [ ] Area filter works
- [ ] Cards display prayer times
- [ ] Click card navigates to detail

---

### Task 33: Create Masjid Detail Page

**Short Title**: Build Masjid Detail View

**Files to Create**:
- `frontend/app/masjids/[id]/page.tsx`

**Spec Reference**:
- Phase II Spec Section 4.2.6 (Masjid Detail)

**Implementation Requirements**:

Display:
- Full masjid information
- Address, coordinates (if available)
- Prayer timetable (formatted table)
- Associated tasks (fetch with masjid_id filter)

**Success Criteria**:
- [ ] Fetches masjid by ID
- [ ] Shows all details
- [ ] Prayer times in table format
- [ ] Lists associated tasks
- [ ] 404 handling for invalid ID

---

### Task 34: Create MasjidSelector Component

**Short Title**: Build Area/Masjid Selector

**Files to Create**:
- `frontend/components/MasjidSelector.tsx`

**Spec Reference**:
- Phase II Spec Section 4.3.4 (MasjidSelector)

**Implementation Requirements**:

Props: `onAreaChange`, `onMasjidSelect`

Features:
- Fetch areas on mount
- Area dropdown
- Fetch masjids for selected area
- Masjid list/grid
- Show prayer times on hover (optional)

**Success Criteria**:
- [ ] Areas populate dropdown
- [ ] Selecting area fetches masjids
- [ ] Selecting masjid calls callback
- [ ] Used in Dashboard and filters

---

### Task 35: Create Pagination Component

**Short Title**: Build Pagination Controls

**Files to Create**:
- `frontend/components/Pagination.tsx`

**Spec Reference**:
- Plan Step 7 (Pagination)

**Implementation Requirements**:

Props: `total`, `limit`, `offset`, `onPageChange`

Controls:
- Previous button (disabled on first page)
- Next button (disabled on last page)
- Page numbers (show 5 around current)
- Current page indicator

**Success Criteria**:
- [ ] Calculates pages correctly
- [ ] Buttons work
- [ ] Callbacks fire with new offset
- [ ] Disabled states work

---

### Task 36: Update Layout with Navbar & Styling

**Short Title**: Apply Global Styles and Layout

**Files to Update**:
- `frontend/app/layout.tsx`
- `frontend/app/globals.css`

**Implementation Requirements**:

Layout updates:
- Import and render Navbar
- Add container/padding for content
- Set max-width for readability

Global CSS:
- Tailwind directives
- Custom styles for Islamic patterns (optional)
- Prayer time table styles
- Form input styles

**Success Criteria**:
- [ ] Navbar appears on all pages
- [ ] Global styles applied
- [ ] Responsive layout
- [ ] Clean, professional look

---

## STEP 8: Integration Testing, Documentation & Deployment Prep

### Task 37: Write Backend Integration Tests

**Short Title**: Create Backend Test Suite

**Files to Create**:
- `backend/tests/__init__.py`
- `backend/tests/conftest.py`
- `backend/tests/test_tasks.py`
- `backend/tests/test_masjids.py`
- `backend/tests/test_integration.py`

**Spec Reference**:
- Phase II Spec Section 6.1 (Backend API Tests)
- Plan Step 8 (Integration tests)

**Implementation Requirements**:

Test coverage:
- Task CRUD operations (12 tests)
- Masjid operations (4 tests)
- Hadith operations (2 tests)
- Integration tests (5 scenarios)

Use FastAPI TestClient and pytest fixtures.

**Success Criteria**:
- [ ] All tests pass
- [ ] Coverage > 80%
- [ ] Tests run with `pytest`

**Validation Command**:
```bash
cd backend
pytest tests/ -v --cov=. --cov-report=html
# Expected: All pass, >80% coverage
```

---

### Task 38: Manual Integration Testing

**Short Title**: Execute E2E Test Scenarios

**Spec Reference**:
- Phase II Spec Section 6.3 (Integration Tests)
- Plan Step 8 (Validation)

**Manual Test Scenarios** (from spec):

1. **Create Task with Masjid**
2. **Filter Tasks by Area**
3. **Complete Task and Filter**
4. **Search Tasks**
5. **Sort Tasks by Priority**

Execute each scenario, document results in TESTING.md.

**Success Criteria**:
- [ ] All 5 scenarios PASS
- [ ] No errors in browser console
- [ ] No errors in backend logs
- [ ] Results documented

---

### Task 39: Write Documentation

**Short Title**: Create Complete Documentation

**Files to Create/Update**:
- `backend/README.md`
- `frontend/README.md`
- `README.md` (root)
- `TESTING.md`

**Spec Reference**:
- Plan Step 8 (Documentation)

**Content Requirements**:

**Backend README**:
- Setup instructions
- Database configuration
- Running server
- API documentation link
- Environment variables

**Frontend README**:
- Setup instructions
- Environment variables
- Running dev server
- Building production
- Component overview

**Root README**:
- Project overview
- Phase II features
- Architecture diagram (text-based)
- Setup both backend + frontend
- Testing guide

**TESTING.md**:
- All test scenarios from spec
- Manual test checklists
- Expected results

**Success Criteria**:
- [ ] All README files complete
- [ ] Setup instructions tested
- [ ] Links work
- [ ] Clear and comprehensive

---

### Task 40: Create Deployment Configuration

**Short Title**: Setup Docker & Docker Compose

**Files to Create**:
- `backend/Dockerfile`
- `frontend/Dockerfile`
- `docker-compose.yml`
- `.dockerignore` (both directories)

**Spec Reference**:
- Plan Step 8 (Deployment prep)

**Implementation Requirements**:

Docker configs for:
- Backend (Python 3.11, FastAPI)
- Frontend (Node 20, Next.js)
- PostgreSQL (for local dev)

Docker Compose orchestrates all 3 services.

**Success Criteria**:
- [ ] Dockerfiles build successfully
- [ ] Docker Compose starts all services
- [ ] App accessible via browser
- [ ] Database persists data

**Validation Command**:
```bash
docker-compose up --build
# Open http://localhost:3000
# Test full workflow
docker-compose down
```

---

## Task Completion Summary

When ALL 40 tasks are complete and passing:

### Backend âœ…
- 20+ API endpoints implemented
- 3 database tables with relationships
- Seed data script
- Swagger documentation
- 80%+ test coverage

### Frontend âœ…
- 6+ pages functional
- 10+ reusable components
- TypeScript strict mode
- Mobile responsive
- Production build succeeds

### Integration âœ…
- Full workflows tested
- CORS configured
- Database persistence
- 30+ acceptance criteria passing

### Documentation âœ…
- Complete README files
- Testing documentation
- API documentation
- Setup guides

---

## Appendix: Task Dependencies

```
Step 1 (Setup):
1 â†’ 2 â†’ 3 â†’ 4 (Backend foundation)
5 â†’ 6 (Frontend foundation)

Step 2 (Backend Tasks):
7 â†’ 8 â†’ 9 â†’ 10 â†’ 11
(Must complete Step 1 first)

Step 3 (Backend Masjid/Hadith):
12 â†’ 13 â†’ 14 â†’ 15 â†’ 16 â†’ 17 â†’ 18
(Requires Step 2 complete)

Step 4 (Seed & Advanced):
19 â†’ 20
(Requires Step 3 complete)

Step 5 (Frontend Types/API):
21 â†’ 22
(Requires Step 1 frontend complete)

Step 6 (Frontend Core):
23 â†’ 24 â†’ 25 â†’ 26 â†’ 27 â†’ 28 â†’ 29 â†’ 30
(Requires Step 5 complete)

Step 7 (Frontend Masjid):
31 â†’ 32 â†’ 33 â†’ 34 â†’ 35 â†’ 36
(Requires Step 6 complete)

Step 8 (Testing & Docs):
37 â†’ 38 â†’ 39 â†’ 40
(Requires all previous steps complete)
```

---

## Quick Reference: Validation Commands

| Task | Quick Validation |
|------|------------------|
| 1-4 | `cd backend && pip install -r requirements.txt && alembic upgrade head` |
| 5-6 | `cd frontend && npm install && npm run build` |
| 7-11 | `cd backend && uvicorn main:app --reload` (test with curl) |
| 19 | `python backend/seed.py` |
| 21-22 | `cd frontend && npx tsx test-api.ts` |
| 28-30 | Open `http://localhost:3000` in browser |
| 37 | `cd backend && pytest tests/ -v` |
| 40 | `docker-compose up` |

---

**Task List Status**: âœ… Ready for Execution
**Next Command**: `/sp.implement` to begin code generation starting with Task 1
**Total Tasks**: 40 tasks across 8 implementation steps
